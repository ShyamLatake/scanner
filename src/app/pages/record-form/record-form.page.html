<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Create Child Record</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="form-container">
    <form [formGroup]="recordForm" (ngSubmit)="onSubmit()">
      <ion-item class="form-item" [class.error]="submitted && f['child_id'].invalid">
        <ion-label position="stacked">
          Child ID / Roll Number <ion-text color="danger">*</ion-text>
        </ion-label>
        <ion-input
          type="text"
          formControlName="child_id"
          placeholder="Enter child ID or roll number"
          [class.invalid]="submitted && f['child_id'].invalid"
        ></ion-input>
      </ion-item>
      @if (submitted && f['child_id'].invalid) {
        <div class="error-message">
          <ion-text color="danger">
            <small>Child ID is required</small>
          </ion-text>
        </div>
      }

      <ion-item class="form-item" [class.error]="submitted && f['name'].invalid">
        <ion-label position="stacked">
          Name <ion-text color="danger">*</ion-text>
        </ion-label>
        <ion-input
          type="text"
          formControlName="name"
          placeholder="Enter child's full name"
          [class.invalid]="submitted && f['name'].invalid"
        ></ion-input>
      </ion-item>
      @if (submitted && f['name'].invalid) {
        <div class="error-message">
          <ion-text color="danger">
            <small>Name is required (minimum 2 characters)</small>
          </ion-text>
        </div>
      }

      <ion-item class="form-item" [class.error]="submitted && f['class_id'].invalid">
        <ion-label position="stacked">
          Class ID <ion-text color="danger">*</ion-text>
        </ion-label>
        <ion-input
          type="text"
          formControlName="class_id"
          placeholder="Enter class identifier"
          [class.invalid]="submitted && f['class_id'].invalid"
        ></ion-input>
      </ion-item>
      @if (submitted && f['class_id'].invalid) {
        <div class="error-message">
          <ion-text color="danger">
            <small>Class ID is required</small>
          </ion-text>
        </div>
      }

      <ion-item class="form-item" [class.error]="submitted && f['school_id'].invalid">
        <ion-label position="stacked">
          School ID <ion-text color="danger">*</ion-text>
        </ion-label>
        <ion-input
          type="text"
          formControlName="school_id"
          placeholder="Enter school identifier"
          [class.invalid]="submitted && f['school_id'].invalid"
        ></ion-input>
      </ion-item>
      @if (submitted && f['school_id'].invalid) {
        <div class="error-message">
          <ion-text color="danger">
            <small>School ID is required</small>
          </ion-text>
        </div>
      }

      <ion-button
        expand="block"
        type="submit"
        [disabled]="recordForm.invalid && submitted"
        class="submit-button"
      >
        Create Record
      </ion-button>
    </form>
  </div>
</ion-content>
